/*! hash:f5d1f6c511ed5bc7445c, time:2017-11-20 17:38:58 */
!function(t){function e(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=4)}([function(module,exports,__webpack_require__){function AdBase(t){t.adtype,this.params=t,this.msg=t.msg,this.api=t.api,this.context=t,this.adplayer=t.adplayer,this.gpDataset=t.gpDataset,this.init(t)}var AdUi=__webpack_require__(10),ReportDp3=__webpack_require__(13),Tool=__webpack_require__(2);AdBase.prototype={init:function(t){this.disable||(new Date,t.adtype,this.adtype=t.adtype,this.orderList={},this.dataset={},this.duration=-1,this.hasRequest=!1,this.vid=t.vid,this.adJson=t.adJson,this.reportIndex=0,this.fileLoadSize=0,this.initData(t),this.loadAd(t))},initData:function(){this.hasInit=!1,this.reportIndex=0,this.playList=[]},broadcast:function(t,e){this.msg.broadcast(t,e)},sendAdInfo:function(){this.broadcast("getAdInfoEvt",{adtype:this.adtype,duration:this.duration})},loadAd:function(t){if(this.dpReporter=new ReportDp3(this.gpDataset),this.broadcast("msg",t),t.errorcode)this.dpReporter.reportStep(1,t);else if(t.adJson){if(this.handleOrder(t.adJson),this.getAdList(this.orderList),this.sendAdInfo(),this.orderList,0==this.playList.length){this.reportAd(this.adJson.adList.item.length);var e=this;return void setTimeout(function(){e.stopAd()},0)}this.initUi(AdUi,t.dom,t.css),this.loadRes(this.orderList.adList),this.dpReporter.reportStep(1,this.orderList)}},getOrderParma:function(t,e,i){return t&&t[e]&&t[e].hasOwnProperty(i)?t[e][i]:""},handleOrder:function(t){var e={};if(this.hasRequest=!0,t&&t.adList&&t.adList.item)return e.vid2aid=this.getOrderParma(t,"adLoc","vid2aid"),e.oid2url=this.getOrderParma(t,"adGetv","oid2url"),e.adid=this.getOrderParma(t,"adLoc","aid"),e.forbidSkip=this.getOrderParma(t,"adLoc","adFlag")+""!="0",e.isVip=1==this.getOrderParma(t,"adLoc","isvip")||2==gpgp.api.getUserType(),this.orderList.adList=[],this.dataset.isAdPlayStart=!1,e.reportIndex=0,this.dataset.isPing=!1,t.adList.item instanceof Array?e.adList=t.adList.item:t.adList.item.image&&e.adList.push(t.adList.item),e.adTypeList=this.filter(e.adList),e.adcost=t.adcost,e.adtype=this.adtype,this.orderList=e},getRes:function(t,e){if(!t)return"";t instanceof Array&&(t=t[0]);var i={vid:t.vid,url:t.url,fileSize:parseInt(t.cs)/1024||1};return e?i[e]:i},isVip:function(t){return t&&t.adLoc&&1==t.adLoc.isvip||2==gpgp.api.getUserType()},renderAd:function(){},stopAd:function(t){this.adtype,this.playState=6,t&&this.clearDelayReport(),!0!==t&&this.broadcast("stopAdEvt",{adtype:this.adtype}),this.adplayer[this.adtype]=null,this.ui&&(this.ui.dom.gpAd.remove(),this.ui.dom.gpAdWrapper&&this.ui.dom.gpAdWrapper.remove())},openAdLink:function(t){if(this.currentAdInfo&&this.currentAdInfo.link){var e=this.gpDataset.lastActionTime||0;if(!((new Date).getTime()-e<300)){this.gpDataset.lastActionTime=(new Date).getTime(),!gpgp.pf.mobile||"ZT"==this.adtype&&"WZ"==this.adtype||this.pauseAd();var i=this,r=function(e){if(!e)if(i.gpDataset.isPc){window.open(i.currentAdInfo.link);var r=gpgp.$.extend({},i.currentAdInfo);t&&(r.txpType=t),i.broadcast("openAdLink",r)}else window.location.href=i.currentAdInfo.link};if(this.currentAdInfo.clickReportUrlOther&&this.currentAdInfo.clickReportUrlOther.reportitem)if(i.gpDataset.isPc)for(var a=0,s=this.currentAdInfo.clickReportUrlOther.reportitem;a<s.length;a++)i.dpReporter.sendReport(s[a].url);else{for(var o=[],a=0,s=this.currentAdInfo.clickReportUrlOther.reportitem;a<s.length;a++)o.push(s[a].url);Tool.loadResource(o,r)}else this.gpDataset.isPc||r(null);this.gpDataset.isPc&&r(null)}}},isEmpty:function(t){return parseInt(t.order_id)<100||"Empty"==t.display_code},isLastAd:function(t){return!!(this.playList&&this.playList.length>0)&&this.playList[this.playList.length-1].oIdx==t},filter:function(t){var e,i={},r=this;t=t instanceof Array?t:[];for(var a=t.length,s=0;s<a;s++)e=t[s]||{},i[e.type]||(i[e.type]=[]),i[e.type].push(e),e.oIdx=s+1,e.lcount=i[e.type].length,e.duration=parseInt(e.duration)||0,e.isRichMedia=r.filterRichMedia(e),e.isEmpty=r.isEmpty(e),e.isEmpty||(e.isVideoAd=r.isVideoAd(e.type),(!e.isVideoAd||e.image&&e.duration)&&(e.image=e.image instanceof Array?e.image[0]:e.image,r.getPlayList(e)));return i},filterRichMedia:function(t,e){return!!(t&&t.display_code&&t.display_code.length>0&&"Empty"!=t.display_code)&&(e&&e.push(t),!0)},getRichData:function(item){var params,richdata;if(item&&item.params&&(params=decodeURIComponent(item.params)),params){richdata=params.split("richdata=")[1];try{richdata=JSON.parse(richdata)}catch(e){eval("richdata="+richdata)}return richdata}return""},getRichRes:function(t,e){if("string"==typeof e){if(t&&t.plugins&&t.plugins[e])return t.plugins[e]}else if(gpgp.isArray(e))for(var i,r=this,a=0,s=e.length;a<s;a++)if(i=r.getRichRes(t,e[a]))return i;return""},isSupportAdtype:function(t){return t==this.gpDataset.adtypeMap[this.adtype]||this.supportAdtype&&this.supportAdtype.indexOf(t)>=0},getPlayList:function(t,e){if(t.image&&t.image.url&&this.isSupportAdtype(t.type)){var i,r=!1;i=this.supportResFormat?this.supportResFormat:t.isVideoAd?"mp4":["jpg","png","jpeg"],this.supportRichMedia&&t.isRichMedia?(t.richdata=this.getRichData(t),t.richRes=this.getRichRes(t.richdata,this.supportRichMedia),t.richRes&&(r=!0)):gpgp.checkSuffix(t.image.url,i)&&(r=!0),r?(t.link="Y"===t.no_click?"":t.link,this.playList.push(t)):this.setReportNull(t)}},isSupport:function(){},isVideoAd:function(t){return(this.gpDataset.videoAdType+"|QT|ZC|HT").indexOf(t)>=0},setReportNull:function(t){t.order_id="1",t.reportUrl=t.reportUrl.replace(/(livemsg\?o\=)(\d+)(\&)/,"$190$3"),t.reportUrlOther=null,t.reportUrlSDK=null},reportAd:function(t){t||(t=1);var e=this,i=t;for(this.isLastAd(t)&&(t=this.adJson.adList.item[this.adJson.adList.item.length-1].oIdx);e.reportIndex<t;)e.adJson&&e.adJson.adList&&e.adJson.adList.item&&e.adJson.adList.item[e.reportIndex]&&(e.reportIndex<t&&e.isEmpty(e.adJson.adList.item[e.reportIndex])||e.reportIndex==i-1)&&(e.reportIndex,e.reportAdByData(e.adJson.adList.item[e.reportIndex])),e.reportIndex++},report:function(t){t&&(t.time>0?(t.time,t.url,this.delayReport(t.url,parseInt(t.time-100))):(t.url,this.broadcast("reportAd",{url:encodeURIComponent(t.url)})))},getReportParams:function(t,e,i){var r=this,a={from:r.gpDataset.from,pf:r.gpDataset.pf,v:r.gpDataset.passThrought?r.gpDataset.passThrought.v:"",dura:r.currentAdInfo?r.currentAdInfo.duration:"",coverid:r.gpDataset.cid||"",vptag:r.gpDataset.vptag||"",url:location.href,oadid:r.adJson.adLoc.aid||"",lcount:e.lcount||1,t:e.ReportTime||0,pf_ex:r.gpDataset.pf_ex,tpid:r.adJson.adLoc.tpid||""};return"Empty"==e.display_code&&(a.chid=r.gpDataset.chid),a},reportAdByData:function(t){var e=this;if(gpgp.isArray(t)&&(t=t[0]),t&&"object"==typeof t){if(t.reportUrl||t.report_url){var i=t.reportUrl||t.report_url,r={url:document.URL};r=gpgp.$.extend(r,e.getReportParams(e.playOidx,t));var a=gpgp.appendParamsToUrl(i,r);this.report({time:parseInt(t.ReportTime),url:a})}t.reportUrlOther&&t.reportUrlOther.reportitem&&(gpgp.isArray(t.reportUrlOther.reportitem)||(t.reportUrlOther.reportitem=[t.reportUrlOther.reportitem]),gpgp.$.each(t.reportUrlOther.reportitem,function(t,i){i&&i.url&&e.report({time:parseInt(i.reporttime),url:i.url,isOther:!0})})),t.reportUrlSDK&&t.reportUrlSDK.reportitem&&(gpgp.isArray(t.reportUrlSDK.reportitem)||(t.reportUrlSDK.reportitem=[t.reportUrlSDK.reportitem]),gpgp.$.each(t.reportUrlSDK.reportitem,function(t,i){i&&i.url&&e.report({time:parseInt(i.reporttime),url:i.url,isOther:!0})}))}},delayReport:function(t,e){var i=setTimeout(function(){this.broadcast("reportAd",{url:encodeURIComponent(t)})},e);this.dataset.delayReportArr||(this.dataset.delayReportArr=[]),this.dataset.delayReportArr.push(i)},clearDelayReport:function(){var t=this;if(t.dataset.delayReportArr)for(var e=0,i=t.dataset.delayReportArr.length;e<i;e++)t.dataset.delayReportArr[e]&&clearTimeout(t.dataset.delayReportArr[e]),t.dataset.delayReportArr[e]=null},isShortVideo:function(){var t=this,e=t.adJson.adLoc.duration;return e&&e>0&&e<180}},module.exports=AdBase},function(module,exports,__webpack_require__){function LinearAd(t){this.supportResFormat="mp4",this.supportRichMedia="richMediaJs",this.supportAdtype=t.gpDataset.videoAdType,AdBase.apply(this,arguments)}var AdBase=__webpack_require__(0);gpgp.extend("LinearAd",LinearAd,AdBase),LinearAd.prototype.initData=function(t){this.hasInit=!1,this.reportIndex=0,this.autoPlay=t.autoPlay||!1,this.hasRender=!1,this.playList=[],this.playIndex=0,this.playOidx=0,this.playState=0,this.preloadIndex=-1,this.preloadOidx=-1,this.errorList={},this.startTime=+new Date,this.isrichPause=!1,this.reportData={videopt:[],videott:[],adtt:0,adtt_start:0,firstview:0,firstadview:window.performance?window.performance.now():0,adfbt:0,errorcode:0}},LinearAd.prototype.initUi=function(t,e,i){this.hasInit||(this.ui||(this.ui=new t(e,i,{hasLoadCss:this.gpDataset.hasLoadCss||!1,isSkipAdButtonShow:this.isSkipAdButtonShow(),isUseMobileUI:this.gpDataset.isUseMobileUI,isVshou:this.gpDataset.isVshou},this.adtype),this.gpDataset.hasLoadCss=!0),this.currentVideo=this.ui.dom.gpVideoAdPlayer[0],this.currentVideo.dataset.tag="current",this.currentVideo.dataset.index="0",this.nextVideo=this.ui.dom.gpVideoAdPlayer[1],this.nextVideo.dataset.tag="preload",this.nextVideo.dataset.index="1",this.playIndex=0,this.hasInit=!0)},LinearAd.prototype.getAdList=function(t){this.playList,this.forbidSkip=t.forbidSkip,this.isVip=t.isVip,this.adtime=this.getAdDuration(this.playList),this.duration=this.adtime.duration,this.adtime,t.trueview=this.isTrueview();for(var e=0;e<this.playList.length;e++)this.reportData.videopt.push(this.playList[e].duration)},LinearAd.prototype.loadRes=function(t){if(6!=this.playState){var e=this.getAdInfo("current");this.setSrc(e,this.playIndex),this.playOidx=this.currentAdInfo.oIdx,this.initVolume(),this.eventStart()}},LinearAd.prototype.loadStart=function(t){t.index,this.playList[t.index].oIdx,"preload"==t.video.dataset.tag?this.nextAdInfo.loadStartTime=(new Date).getTime():this.currentAdInfo.loadStartTime=(new Date).getTime(),this.broadcast("loadStartEvt",{adtype:this.adtype,index:this.playList[t.index].oIdx,preload:t.preload,duration:parseInt(this.playList[t.index].duration)}),this.listenTouch(1)},LinearAd.prototype.loadReady=function(t){6!=this.playState&&(t&&t.preload||(new Date,this.orderList,this.broadcast("loadReadyEvt",{adtype:this.adtype,index:this.playList[t.index].oIdx,preload:t.preload}),this.autoPlay&&this.playAd()))},LinearAd.prototype.loadComplete=function(t){6!=this.playState&&(this.playList[t.index].loadComplete||(this.playList[t.index].loadComplete=!0,t.index==this.playList.length-1?this.broadcast("loadCompleteEvt",{isAllEnd:!0,adtype:this.adtype,index:this.playList[t.index].oIdx,duration:parseInt(this.playList[t.index].duration)}):t.preload||(this.broadcast("loadCompleteEvt",{adtype:this.adtype,index:this.playList[t.index].oIdx,duration:parseInt(this.playList[t.index].duration)}),this.preload())))},LinearAd.prototype.preload=function(t){if(6!=this.playState){var e=this.playIndex+1;if(!(e>=this.playList.length)){this.playList[e].oIdx,this.preloadIndex=e,this.preloadOidx=this.playList[e].oIdx;var i=this.getAdInfo("next");this.setSrc(i,e,!0)}}},LinearAd.prototype.setSrc=function(t,e,i){t.isRichMedia?t.player.loadAd({index:e,preload:i,adItem:this.playList[e],api:this},this):(t.player.src=t.url,t.player.dataset.index=e)},LinearAd.prototype.playAd=function(t,e){if(6!=this.playState){if("vpaid"==t&&(this.isrichPause=!1),0===this.playState||5===this.playState||6===this.playState){this.currentVideo.style.display="block",this.nextVideo.style.display="none",this.getAdInfo("current"),this.showUi(),this.currentAdInfo.player.play(),this.playOidx=this.currentAdInfo.oIdx,this.playOidx,this.reportData.videott_start=(new Date).getTime(),this.broadcast("playStartEvt",{adtype:this.adtype,index:this.playOidx,vid:this.currentAdInfo.vid}),this.playIndex,this.playOidx,this.playList;try{this.reportAd(this.playOidx)}catch(t){}}else{if(4!==this.playState)return;if(this.currentAdInfo.isRichMedia&&this.isrichPause)return;this.currentAdInfo.player.play()}this.startAdCountDownTime(),this.playState=3}},LinearAd.prototype.playNextAd=function(t,e){if(6!=this.playState){if(this.playIndex>=this.playList.length-1)return void this.stopAd();this.nextVideo=this.ui.dom.gpVideoAdPlayer[this.playIndex%2],this.nextVideo.dataset.tag="preload",this.playIndex++,this.currentVideo=this.ui.dom.gpVideoAdPlayer[this.playIndex%2],this.currentVideo.dataset.tag="current",this.playState=5,this.playAd(),this.preload()}},LinearAd.prototype.playStart=function(t){6!=this.playState&&(this.currentAdInfo.hasPlayStart||(this.currentAdInfo.hasPlayStart=!0))},LinearAd.prototype.playing=function(){if(6!=this.playState){var t=this;t.dataset.lastTimer||(t.dataset.lastTimer=setInterval(function(){t.broadcast("playProgressEvt",{adtype:t.adtype,index:t.playOidx,playTime:t.adtime.adPlayedSeconds,duration:t.adtime.duration})},1e3))}},LinearAd.prototype.playError=function(t){var e=this.playList[t.index];if(e){var i=e.oIdx;this.errorList[i]||(this.errorList[i]=this.playList.splice(t.index,1),t.index,t.preload,t.error,t.preload?(this.preloadIndex,this.preloadOidx,t.error.code,gpgp.$.extend(this.adtime,this.getAdDuration(this.playList)),this.preload()):(this.playIndex,this.playOidx,t.error.code,0==this.playList.length?this.stopAd():(gpgp.$.extend(this.adtime,this.getAdDuration(this.playList)),this.loadRes(this.playList))),this.playList,this.adtime.duration,this.broadcast("playErrorEvt",{adtype:this.adtype,index:i,isAllEnd:t.index==this.playList.length,errorType:t.error.type,errorCode:t.error.code}),this.errorList)}},LinearAd.prototype.playComplete=function(t){t.index,this.playIndex,t.index==this.playIndex&&(this.playIndex,this.reportData.videott.push((new Date).getTime()-this.reportData.videott_start),this.reportData.videott_start=-1,this.broadcast("playEndEvt",{adtype:this.adtype,index:this.playOidx}),this.playNextAd())},LinearAd.prototype.pauseAd=function(){4!=this.playState&&(this.stopAdCountDownTime(),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&4==this.currentAdInfo.player.playState&&(this.isrichPause=!0),this.playState=4,this.currentAdInfo.player.pause(),this.broadcast("pauseAdEvt",{adtype:this.adtype}))},LinearAd.prototype.stopAd=function(t){6!=this.playState&&(t||this.reportAd(this.adJson.adList.item.length),this.playState=6,this.stopAdCountDownTime(),this.eventEnd(),this.listenTouch(0),this.currentVideo&&(this.currentVideo.pause(),gpgp.$(this.currentVideo).removeAttr("src"),gpgp.$(this.nextVideo).removeAttr("src")),this.dataset.lastTimer&&(clearInterval(this.dataset.lastTimer),this.dataset.lastTimer=null),this.reportData.videott_start>0&&this.reportData.videott.push((new Date).getTime()-this.reportData.videott_start),this.reportData.adtt=(new Date).getTime()-this.reportData.adtt_start,this.dpReporter.reportStep(2,this.orderList,this.reportData),AdBase.prototype.stopAd.apply(this,arguments))},LinearAd.prototype.closeAd=function(){if(this.dataset.trueview)return this.dpReporter.reportStep(2,this.orderList,{adclose:this.currentAdInfo.order_id,closetime:(new Date).getTime()-this.reportData.videott_start}),this.stopAd("closeAd");this.isShortVideo()?(this.dpReporter.reportStep(2,this.orderList,{adclose:this.currentAdInfo.order_id,closetime:(new Date).getTime()-this.reportData.videott_start}),this.stopAd("closeAd")):this.isSkipAdButtonShow()&&(gpgp.pf.mobile&&!gpgp.pf.os.ipad?gpgp.api.txLoginOnMobile&&"function"==typeof gpgp.api.txLoginOnMobile.isLogin&&gpgp.api.txLoginOnMobile.isLogin(function(t){0===t?gpgp.api.txLoginOnMobile.goLogin():location.href="http://film.qq.com/weixin/upay.html?aid=V0$$4:1"}):gpgp.api.showOpenVIPGuide(),this.pauseAd(),this.broadcast("pauseAdEvt",{adtype:this.adtype,index:this.playOidx}))},LinearAd.prototype.loading=function(t){var e=this.getLoadingProgress(t);if(e>=1)return void this.loadComplete({index:t.dataset.index,preload:"preload"==t.dataset.tag,video:t});var i,r=1,a=(new Date).getTime();i="preload"==t.dataset.tag?this.nextAdInfo:this.currentAdInfo,r=i.fileSize,i.loadedTime?a-=i.loadedTime:a-=i.loadStartTime,i.loadedTime=(new Date).getTime();var s=e*r;i.loadFileSize&&(s-=i.loadFileSize),i.loadFileSize=e*r;var o=(1e3*s/a).toFixed(1);this.broadcast("loadProgressEvt",{adtype:this.adtype,speed:o}),t.dataset.index,e.toFixed(1),s.toFixed(1),i.loadFileSize.toFixed(1),r.toFixed(1)},LinearAd.prototype.listenTouch=function(t){if("mac"===this.gpDataset.pf_ex){var e=0,i=null,r=function(t){"current"==t.target.dataset.tag&&(i=t.target,e<i.currentTime&&(i.currentTime=e))},a=setInterval(function(){i&&(e=i.currentTime)},1e3);t?(this.ui.dom.gpVideoAdPlayer.off("seeking.touchbarAd"),this.ui.dom.gpVideoAdPlayer.off("seeked.touchbarAd"),this.ui.dom.gpVideoAdPlayer.on("seeking.touchbarAd",r),this.ui.dom.gpVideoAdPlayer.on("seeked.touchbarAd",r)):(clearInterval(a),this.ui.dom.gpVideoAdPlayer.off("seeking.touchbarAd"),this.ui.dom.gpVideoAdPlayer.off("seeked.touchbarAd"))}},LinearAd.prototype.getLoadingProgress=function(t){var e=0,i=1;try{var r=t.buffered.length-1;if(r<0)return 0;e=t.buffered.end(r)||0,e=parseInt(1e3*e+1)/1e3,i=t.duration}catch(t){}return Math.min(e/i,1)},LinearAd.prototype.eventStart=function(t){if(!this.eventList){var e=this;this.eventList={gpVideoAdPlayer:{loadstart:function(){e.reportData.adfbt_start=(new Date).getTime(),e.loadStart({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this})},progress:function(){e.loading(this)},canplay:function(){"current"==this.dataset.tag&&(0===e.reportData.adtt&&e.reportData.adtt_start<=0&&(e.playList,e.reportData.adfbt=(new Date).getTime()-e.reportData.adfbt_start,e.reportData.adtt_start=(new Date).getTime(),void 0!==window.performance&&(e.reportData.firstview=window.performance.now(),e.reportData.firstadview=window.performance.now()-e.reportData.firstadview)),this.dataset.tag,e.reportData.adfbt,e.loadReady({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this}))},canplaythrough:function(){e.loadComplete({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this})},playing:function(){e.playStart({index:this.dataset.index,shotTime:5e3,video:this})},timeupdate:function(){3==e.playState&&e.playing()},error:function(){this.dataset.tag,e.shotAd&&e.shotAd({index:this.dataset.index,shotTime:0,video:this});var t="videoError";this.error&&this.error.constructor&&this.error.constructor.name&&(t=this.error.constructor.name),e.playError({index:this.dataset.index,preload:"preload"==this.dataset.tag,error:{type:t,code:this.error.code}}),e.reportData.adtt,e.reportData.adtt_start,e.reportData.videott.push(0),e.reportData.adtt_start=-1,this.dataset,e.orderList;try{e.dpReporter.reportStep(3,e.orderList,{tpindex:this.dataset.index,oid:e.orderList[this.dataset.index].order_id,errorcode:2301,adload:0})}catch(t){t.message}},ended:function(){this.dataset.tag,e.playComplete({index:this.dataset.index,video:this})}},volume:{click:function(){e.mute(!e.isMute)}},close:{click:function(){e.closeAd()}},closeText:{click:function(){e.closeAd()}},trueviewClose:{click:function(){e.closeAd()}},trueviewCloseText:{click:function(){e.closeAd()}},detail:{click:function(){e.currentAdInfo,e.dpReporter.reportStep(4,e.orderList,{adclick:e.currentAdInfo.order_id,clicktime:(new Date).getTime()-e.reportData.videott_start}),e.openAdLink()}},linkArea:{click:function(){e.currentAdInfo,e.dpReporter.reportStep(4,e.orderList,{adclick:e.currentAdInfo.order_id,clicktime:(new Date).getTime()-e.reportData.videott_start}),e.openAdLink()}},why:{click:function(){e.broadcast("pauseAd"),e.hideUiPlay(),e.ui.show("noSkipTips")}},noSkipTipsClose:{click:function(){e.broadcast("playAd"),e.ui.hide("noSkipTips")}}};for(var i in this.eventList)for(var r in e.eventList[i])e.ui.dom[i]&&e.ui.dom[i].on(r,e.eventList[i][r])}},LinearAd.prototype.eventEnd=function(){var t=this;for(var e in this.eventList)for(var i in t.eventList[e])t.ui.dom[e].off(i,t.eventList[e][i]);this.eventList=null},LinearAd.prototype.getAdInfo=function(t){var e=t+"AdInfo",i=t+"Video";if("current"==t?(e="currentAdInfo",this[e]=this.playList[this.playIndex]):"next"==t&&(e="nextAdInfo",this[e]=this.playList[this.playIndex+1]),this[e].isKB=this[e].type==this.gpDataset.adtypeMap.KB,this.params.wrapper=this.ui.dom.gpAd[0],this[e].isRichMedia){if(!this[e].player){var r=__webpack_require__(3);this[e].player=new r(this.params)}}else{this[e].player=this[i];var a=this.getRes(this[e].image);this[e].vid=a.vid,this[e].url=a.url,this[e].fileSize=a.fileSize}return this[e]},LinearAd.prototype.showUi=function(){var t=this;return this.renderAdByStep("init"),this.renderAdByStep("dspName",this.currentAdInfo.dsp_name||""),this.renderAdByStep("mute",this.gpDataset.isSupportMute),this.renderAdByStep("pf",this.gpDataset.isUseMobileUI),this.forbidSkip?void this.renderAdByStep("forbidSkip"):(this.currentAdInfo.isKB,this.isSkipAdButtonShow(),this.currentAdInfo.isKB&&!this.isSkipAdButtonShow()?void this.renderAdByStep("KB",{isKB:!0,isShowSkip:!1}):(this.renderAdByStep("KB",{isKB:this.currentAdInfo.isKB,isShowSkip:!0}),this.isVip?void this.renderAdByStep("vipCommand",this.isVipCommand()):this.isTrueview()?void this.renderAdByStep("trueview"):void this.renderAdByStep("skipTips",{isVip:!1,isShowSkip:t.isSkipAdButtonShow(),isShortVideo:t.isShortVideo()})))},LinearAd.prototype.renderAdByStep=function(t,e){var i=this;switch(t){case"init":this.ui.show("gpAd"),this.ui.show("adLayer"),i.renderAdByStep("detail");break;case"detail":"vip"==e?(i.ui.hide("detail"),i.ui.show("vipCommand")):i.currentAdInfo.link?(i.ui.show("detail"),i.ui.show("linkArea"),i.ui.hide("vipCommand")):i.ui.hide("detail");break;case"mute":e&&i.ui.show("volume");break;case"dspName":e?(i.ui.dom.dspName.html(e),i.ui.show("dspName")):i.ui.hide("dspName");break;case"pf":e&&i.ui.show("linkArea");break;case"forbidSkip":i.isHBO()?(i.ui.dom.noSkipText.html("应内容方要求，VIP无法免该片广告"),i.ui.hide("why")):i.isHuaNa()&&i.ui.dom.noSkipText.html("应版权方要求，VIP无法免该片广告"),i.ui.show("noSkip");break;case"vipCommand":e?(i.renderAdByStep("detail","vip"),i.renderAdByStep("skipTips",{isCommand:!0,isShowSkip:!0})):i.renderAdByStep("skipTips",{isVip:!0,isShowSkip:!0});break;case"trueview":i.dataset.trueview=!0,i.ui.show("trueview");var r=i.adtime.duration;r>10&&(!i.dataset.hasOwnProperty("countDown")||-1==i.dataset.countDown)?(i.ui.show("trueviewText"),i.dataset.countDown=5,i.ui.dom.countDown.html(i.dataset.countDown)):(0===i.dataset.countDown||r<=10)&&(r<=10&&i.ui.hide("trueviewText"),i.ui.dom.trueviewClose.css("display","inline-block"),i.ui.show("trueviewCloseText"));break;case"KB":e.isShowSkip?i.ui.refreshDisplay("time",!e.isKB):i.ui.hide("canSkip");break;case"skipTips":e.isCommand?i.ui.dom.closeText.html("关闭推荐"):e.isVip?i.ui.dom.closeText.html("VIP点击关闭广告"):e.isShortVideo?i.ui.dom.closeText.html("关闭广告"):i.ui.dom.closeText.html("VIP可关闭广告"),i.ui.refreshDisplay("close",e.isShowSkip),i.ui.refreshDisplay("closeText",e.isShowSkip),i.ui.show("canSkip")}},LinearAd.prototype.resize=function(t,e){this.currentAdInfo,this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.resize(t,e)},LinearAd.prototype.setPos=function(t){t.hasOwnProperty("bottom")&&(0==t.bottom&&(t.bottom=10),this.ui.dom.detail.css("bottom",t.bottom)),t.hasOwnProperty("top")&&(0==t.top&&(t.top=10),this.ui.dom.topArea.css("top",t.top))},LinearAd.prototype.isVipCommand=function(){return this.currentAdInfo&&"VipCommand"==this.currentAdInfo.display_code},LinearAd.prototype.isTrueview=function(){return 1==this.playList.length&&(this.playList[0].richdata||(this.playList[0].richdata=this.getRichData(this.playList[0])),this.playList[0].richdata.plugins&&"Y"===this.playList[0].richdata.plugins.trueview)},LinearAd.prototype.isSkipAdButtonShow=function(){return"function"==typeof gpgp.api.showOpenVIPGuide},LinearAd.prototype.getAdDuration=function(t){for(var e=0,i=0,r=0;r<t.length;r++){if(!t[r].duration)return;e+=parseInt(t[r].duration)/1e3,"WK"!=t[r].type&&"KB"!=t[r].type||(i+=parseInt(t[r].duration)/1e3)}return this.errAdTime&&(e-=this.errAdTime),{duration:e,covertTime:i}},LinearAd.prototype.stopAdCountDownTime=function(){var t=this;t.adCountDownTimer&&(clearInterval(t.adCountDownTimer),t.adCountDownTimer=null)},LinearAd.prototype.startAdCountDownTime=function(){this.stopAdCountDownTime();var t,e;this.adtime&&(this.adtime.adPlayedSeconds||(this.adtime.adPlayedSeconds=0),(e=parseInt(this.adtime.duration-this.adtime.adPlayedSeconds-this.adtime.covertTime))>0&&this.ui.dom.time.html(e));var i=this;this.adCountDownTimer=setInterval(function(){return i.adtime.adPlayedSeconds+=1,i.adtime.duration?(t=i.adtime.duration-i.adtime.adPlayedSeconds,(t=parseInt(10*t)/10)<=0?(i.dataset.countDown=-1,i.stopAd(),void i.stopAdCountDownTime()):(e=t-i.adtime.covertTime,e>0&&i.ui.dom.time.html(e),void(i.dataset.countDown>0&&(i.dataset.countDown--,i.dataset.countDown>0?i.ui.dom.countDown.html(i.dataset.countDown):(i.ui.dom.trueviewClose.css("display","inline-block"),i.ui.show("trueviewCloseText"),i.ui.hide("trueviewText")))))):(i.hide(),void i.stopAdCountDownTime())},1e3)},LinearAd.prototype.initVolume=function(){this.isMute=eval(gpgp.getLocalStorage("mute"));var v=parseInt(gpgp.getLocalStorage("volume"));isNaN(v)&&(v=this.gpDataset.volume||50),this.volume=v,this.isMute,this.volume,0===this.volume&&(this.isMute=!0),this.mute(this.isMute),this.setVolume(this.volume)},LinearAd.prototype.setVolume=function(t,e){!1!==e&&(e=!0),t=parseInt(t),isNaN(t)||(0==t?this.mute(!0,e):t>0&&this.mute(!1,e),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.setVolume(t),this.currentVideo&&this.nextVideo&&(this.currentVideo.volume=t/100,this.nextVideo.volume=t/100),e&&gpgp.setLocalStorage("volume",t))},LinearAd.prototype.mute=function(t,e){!1!==e&&(e=!0),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.mute(t),this.currentVideo&&this.nextVideo&&(this.currentVideo.muted=t,this.nextVideo.muted=t),t?this.ui.dom.volume.addClass(this.ui.css.muteClass):this.ui.dom.volume.removeClass(this.ui.css.muteClass),this.isMute=t,e&&gpgp.setLocalStorage("mute",t)},module.exports=LinearAd},function(t,e){var i=function(t,e){if(t){for(var i=0,a=!1,s=function(){(i+=1)===t.length&&(a=!0,e(null))},o=0;o<t.length;o++)r(t[o],s);setTimeout(function(){a||e(null)},2e3)}else e("no url")},r=function(t,e){var i=new Image;i.onload=function(){e()},i.src=t},a=function(t,e,i,r){var a=r?decodeURIComponent:function(t){return t};return function(r){var s={};i&&(r=r.replace(new RegExp(e+"$"),""));for(var o=r.split(e),n=0;n<o.length;n++){var d=o[n].split(t);s[a(d[0])]=a(d[1])}return s}},s={get:function(t){if(t){return a("=","; ",!1,!1)(document.cookie)[t]}}},o=function(t){if(!t)return"unknown";var t=t.toLowerCase(),e=-1,i=t.match(/(?:metasr.\d*|qqbrowser.\d*|maxthon.\d*|theworld|lbbrowser|firefox.\d*|opera.\d*|bidubrowser.\d*)/);if(null!==i)return i[0].replace(" ","").replace("/","");if(t.indexOf("android")>-1)return"android";if(t.indexOf("iphone")>-1)return"iphone";if(t.indexOf("ipad")>-1)return"ipad";if((e=t.indexOf("chrome"))>-1)return"chrome"+parseInt(t.substr(e+7,4));if((e=t.indexOf("safari"))>-1)return"safari";var r=t.indexOf("msie");if(r>-1)return"ie"+parseInt(t.substr(r+5,2));if(t.indexOf("trident")>-1){var a=t.indexOf("rv:");if(a>-1)return"ie"+parseInt(t.substr(a+3,2))}return t};t.exports={loadResource:i,cookie:s,getUA:o}},function(t,e){function i(t){this.init(t)}i.prototype.init=function(t){this.playState=0,this.params=t;var e=this;e.iframe=document.createElement("iframe"),e.iframe.id="adLoaderIframe",e.iframe.name="adLoaderIframe",e.iframe.frameBorder=0,gpgp.$(e.iframe).css({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"none","pointer-events":"auto"}),this.wrapper=t.wrapper,t.wrapper.appendChild(e.iframe)},i.prototype.loadAd=function(t){this.loadParams=t,this.outerApi=t.api,this.playList=t.adItem,this.duration=parseInt(t.adItem.duration);var e=this;setTimeout(function(){gpgp.loadJs(gpgp.appendParamsToUrl(t.adItem.richRes,{t:(new Date).getTime()}),e.onInitAd.bind(e),e.iframe.contentWindow.document.body,e.iframe.contentWindow.document)},100)},i.prototype.onInitAd=function(t){if(t&&t.error)return this.loadParams.error=t.error,void this.callOuterApi("playError",this.loadParams);if(this.params,"IVB"==this.params.adtype){var e=null;gpgp.$(this.iframe.contentWindow.document.body).click(function(t){t.currentTarget,t.target,t.target.dataset.click,t.currentTarget!=t.target&&t.target.dataset.click||(clearTimeout(e),e=setTimeout(function(){var t=gpgp.api.getPlayState();1==t?gpgp.api.userPausePlayer&&gpgp.api.userPausePlayer():2==t&&gpgp.api.userPlay&&gpgp.api.userPlay()},300))}),gpgp.$(this.iframe.contentWindow.document.body).dblclick(function(){clearTimeout(e),gpgp.api.toggleWindowFullScreen&&gpgp.api.toggleWindowFullScreen()})}this.innerEvts={AdStarted:"onStartAd",AdStopped:"onStopAd",AdPaused:"onPauseAd",AdPlaying:"onPlayAd",AdError:"onError",AdVideoComplete:"stopAd"},this.outEvts={AdLoadStart:"loadStart",AdLoading:"loading",AdLoaded:"loadReady",AdLoadComplete:"loadComplete",AdVideoStart:"playStart",AdClickThru:"openAdLink"};var i=this,r=i.iframe.contentWindow.getVPAIDAd;if(r&&"function"==typeof r){i.VPAIDCreative=r();for(var a in i.outEvts)i.VPAIDCreative.subscribe(i.onSubscribe,a,i);for(var s in i.innerEvts)i.VPAIDCreative.subscribe(i.onSubscribe,s,i);setTimeout(function(){i.VPAIDCreative.initAd(i.params.gpDataset.playerWidth,i.params.gpDataset.playerHeight,"normal",0,i.loadParams.adItem.richdata)},10)}},i.prototype.onSubscribe=function(t,e){"AdError"==t&&(this.loadParams.error={type:"VpaidError",code:e.code}),this.innerEvts[t]?this[this.innerEvts[t]](this.loadParams):this.outEvts[t]&&this.callOuterApi(this.outEvts[t],this.loadParams)},i.prototype.resize=function(t,e){this.VPAIDCreative&&this.VPAIDCreative.resizeAd(t,e)},i.prototype.mute=function(t){this.VPAIDCreative&&this.VPAIDCreative.mute(t)},i.prototype.setVolume=function(t){this.VPAIDCreative&&this.VPAIDCreative.setAdVolume(t)},i.prototype.setPos=function(t){if(this.VPAIDCreative&&this.VPAIDCreative.setPos)try{this.VPAIDCreative.setPos(t)}catch(t){}},i.prototype.play=function(){this.playState?4==this.playState&&this.VPAIDCreative&&this.VPAIDCreative.resumeAd():(this.callOuterApi("initVolume"),this.VPAIDCreative&&this.VPAIDCreative.startAd())},i.prototype.onPlayAd=function(){this.playState=3,this.callOuterApi("playAd","vpaid")},i.prototype.onStartAd=function(){var t=this;this.heart=setInterval(function(){t.callOuterApi("playing")},1e3)},i.prototype.pause=function(){4!=this.playState&&this.VPAIDCreative&&this.VPAIDCreative.pauseAd()},i.prototype.onPauseAd=function(){4!=this.playState&&(this.playState=4,this.callOuterApi("pauseAd","vpaid"))},i.prototype.onError=function(t){try{this.wrapper.removeChild(this.iframe),this.callOuterApi("playError",t)}catch(t){}},i.prototype.stopAd=function(){6!=this.playState&&(this.playState=6,clearInterval(this.heart),this.VPAIDCreative&&this.VPAIDCreative.stopAd())},i.prototype.onStopAd=function(t){try{this.wrapper.removeChild(this.iframe)}catch(t){}this.callOuterApi("playComplete",t)},i.prototype.callOuterApi=function(t,e){if(this.outerApi&&"function"==typeof this.outerApi[t])try{this.outerApi[t](e)}catch(t){}},t.exports=i},function(t,e,i){var r={extend:function(t,e,i){var r=function(){};r.prototype=i.prototype,e.prototype=new r,e.prototype.constructor=e},loadJs:function(t,e,i,r){var a=document.createElement("script");if(a.type="text/javascript",a.charset="UTF-8",a.src=t.replace(/http(s)?:/,location.protocol),a.onerror=function(t){e({src:a.src,error:{type:"RichJsError",code:404}})},a.addEventListener?a.addEventListener("load",function(){e()},!1):a.attachEvent&&a.attachEvent("onreadystatechange",function(){"loaded"==window.event.srcElement.readyState&&e()}),r){var s=document.createElement("base");s.href=a.src.match(/.+\//)[0],r.getElementsByTagName("head")[0].appendChild(s)}i?i.appendChild(a):document.getElementsByTagName("head")[0].appendChild(a)},appendParamsToUrl:function(t,e){return"string"==typeof t&&e&&(t+=-1==t.indexOf("?")?"?":"&"+r.param2url(e)),t},param2url:function(t){if("object"==typeof t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join("&")}return""},checkSuffix:function(t,e){t=t.toLowerCase();var i=/\.(\w+)(?:$|\?|\#)/.exec(t);if(!i||!i[1])return!1;if(!e)return i[1];if("string"==typeof e)return i[1]===e;if(e instanceof Array){for(var r=e.length-1;r>=0;r--)if(i[1]===e[r])return!0,!0;return!1}},isArray:function(t){return t instanceof Array},isVideoAd:function(t){return"QT|ZC|HT".indexOf(t)>=0},tmpl:i(5),pf:i(6),gpKey:"gp-",$:"undefined"!=typeof Txplayer&&Txplayer.$||$||{},randomParam:function(){return+new Date+".r"+Math.floor(1e3*Math.random())},getLocalStorage:function(t){var e="";try{window.localStorage&&(e=window.localStorage[r.gpKey+t])}catch(t){}return e},setLocalStorage:function(t,e){try{window.localStorage&&(window.localStorage[r.gpKey+t]=e)}catch(t){}},getScale:function(t,e,i,r,a){var s,o,n;return s=i/t,o=r/e,n=Math.min(s,o),a&&(a.width=parseInt(a.width*n),a.height=parseInt(a.height*n)),n||1},getReportParams:function(t,e,i){var r={from:t.from,pf:t.pf,pf_ex:t.pf_ex,v:t.passThrought?t.passThrought.v:"",coverid:t.cid||"",vptag:t.vptag||"",dura:e.duration,lcount:e.lcount||1,t:i||0,url:location.href,oadid:"",tpid:""};return"Empty"==e.display_code&&(r.chid=t.chid),r},sendReport:function(t,e){var i="GP_REPORT"+r.randomParam(),a=r[i]=new Image;a.onload=a.onerror=function(){e&&e(),delete r[i]},a.src=t},recordWisdomPoint:function(t,e,i,a){i=i||"",a=a||"";var s="https://p.l.qq.com?t=s&actid="+t+"&mid="+e+"&oid="+e+"&locid="+i+"&aver="+a;r.sendReport(s)},log:function(){}};window.gpgp=r,r.HdPlayerAd=i(7)},function(t,e){var i=function(t,e){return function(r,a){var s=/\s/.test(r)?function(t){var i,r=[e],a=[[]];for(i in t)r.push(i),a.push(t[i]);return new Function(r,s.$).apply(t,a).join("")}:t[r]=t[r]||i(document.getElementById(r).innerHTML);return s.$=s.$||e+".push('"+r.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join(e+".push('").split("\r").join("\\'")+"');return "+e,a?s(a):s}}({},"$"+ +new Date);t.exports=i},function(t,e){function i(t){t=t||navigator.userAgent,t=t.toLowerCase(),this.browser={},this.os={},this.phone={},this.mobile=!1,t.indexOf("mobile")>-1&&(this.mobile=!0);var e,i,r={android_1:/android[\s\/]([\d\.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\stouch;\sCPU\siPhone\sos\s([\d_]+)/i,ipod_100:/iPod.*os\s?([\d_\.]+)/i,iphone:/iPhone;\sCPU\siPhone\sos\s([\d_]+)/i,iphone_100:/iPhone.*os\s?([\d_\.]+)/i,ipad_1:/ipad;\scpu\sos\s([\d_]+)/i,ipad_2:/ipad([\d]+)?/i,windows:/windows\snt\s([\d\.]+)/i,mac:/Macintosh.*mac\sos\sx\s([\d_\.]+)/i,linux:/Linux/i};for(var a in r)if(e=r[a].exec(t)){i=a.replace(/_\d+/,""),this.os[i]=!0,this.os.name=i,e[1]&&(this.os.version=e[1].replace(/_/g,"."));break}(this.os.iphone||this.os.ipad||this.os.ipod)&&(this.os.ios=!0);var s,o,n={wechat:/MicroMessenger\/([\d\.]+)/i,ipadqq:/IPadQQ\/([\d\.]+)/i,mqq:/qq\/([\d\.]+)/i,qzone:/QZONEJSSDK\/([\d\.]+)/i,mqqbrowser:/mqqbrowser\/([\d\.]+)/i,qqbrowser:/[^m]QQBrowser\/([\d\.]+)/i,x5:/tbs\/(\d+)/i,uc:/UCBrowser\/([\d\.]+)/i,safari_1:/Version\/(([\d\.]+))\sSafari\/[\d\.]+/i,safari_2:/Safari\/([\d\.]+)/i,firefox:/Firefox\/([\d\.]+)/i,ie_1:/MSIE\s([\d\.]+)/i,ie_2:/(trident\/\d\.\d)/i,ie_3:/(Edge)\/\d+\.\d+/i,weibo:/weibo__([\d\.]+)/i,qqnews:/qqnews\/([\d\.]+)/i,qqlive_1:/QQLiveBrowser\/([\d\.]+)/i,qqlive_2:/QQLiveHDBrowser\/([\d\.]+)/i,kuaibao:/qnreading\/([\d\.]+)/i,liebao:/LieBaoFast\/([\d\.]+)/i,douban:/com\.douban\.frodo\/([\d\.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,chrome_1:/CriOS\/([\d\.]+)/i,chrome_2:/Chrome\/([\d\.]+)/i};for(var d in n)if(s=n[d].exec(t)){if(o=d.replace(/_\d+/,""),this.browser[o])return;this.browser[o]={version:s[1]}}this.os.android&&this.browser.safari&&delete this.browser.safari,this.browser.chrome&&this.browser.safari&&delete this.browser.safari,this.browser.ie&&this.browser.ie.version&&this.browser.ie.version.indexOf("trident")>-1&&(this.browser.ie.version.indexOf("6.0")>-1?this.browser.ie.version="10":this.browser.ie.version.indexOf("5.0")>-1?this.browser.ie.version="9":this.browser.ie.version.indexOf("4.0")>-1?this.browser.ie.version="8":this.browser.ie.version="11");var p,h={ipod:/iPod/i,ipad:/iPad/i,iphone:/iPhone/i,huawei_1:/HUAWEI([\w_-]+)/i,huawei_2:/(CHM-\w+)/i,huawei_3:/(HonorChe)/i,huawei_4:/HONORPLK/i,huawei_5:/(Che\d+-CL\d+)/i,huawei_6:/(H\d+-L\d+)/i,huawei_100:/HUAWEI/i,xiaomi_1:/(HM\sNOTE)/i,xiaomi_2:/(HM\s\w+)/i,xiaomi_3:/(MI\s\w+)/i,xiaomi_4:/(MI-ONE\sPlus)/i,xiaomi_5:/(M1)\sBuild/i,xiaomi_6:/(HM\d+)/i,xiaomi_7:/Xiaomi[\s_]?([\w_]+)/i,samsung_1:/(GT-\w+)/i,samsung_2:/(SCH-\w+)/i,samsung_3:/(SM-\w+)/i,vivo:/vivo\s(\w+)/i,oneplus:/ONEPLUS-([a-z0-9]+)/i,lenovo_1:/Lenovo[\s-]?([\w-]+)/i,lenovo_100:/Lenovo/i,zte_1:/ZTE\s?(\w+)?/i,zte_2:/ZTE/i,coolpad_1:/Coolpad\s(\w+)/i,coolpad_100:/Coolpad/i,oppo_1:/OPPO\s?(\w+)/i,oppo_2:/(R7Plus|R8007|R801|R831S|R8205)/i,oppo_100:/OPPO/i,meizu_1:/(MX\d+)/i,meizu_2:/(m\d+\snote)\sBuild/i,htc_1:/HTC\s?(\w+)/i,htc_100:/HTC/i,tcl:/TCL\s(\w+)/i,lephone:/lephone\s(\w+)/i,lg:/LG[\s-]?(\w+)/i,galaxy:/(galaxy\d+)/,hisense_1:/Hisense/i,hisense_2:/HS-(\w+)/i,philips:/Philips\s?(\w+)?/i,"金立":/(GN\w+)\sBuild/i,sonny:/sonny/i,"天语":/K-Touch/i};for(var l in h)if(p=h[l].exec(t)){this.phone.name=l.replace(/_\d+/,""),p[1]&&(this.phone.version=p[1].replace(/^[_-]/gi,""));break}}t.exports=new i},function(t,e,i){function r(t){gpgp.players||(gpgp.players=[]),gpgp.players.push(this),this.msg=t.msg,this.dom=t.dom,this.css=t.css,this.api=t.api||{},this.adplayer={},gpgp.api=t.api||{},"function"!=typeof gpgp.api.getUserType&&(gpgp.api.getUserType=function(){return 0}),this.gpDataset=new a(t.dataset),this.exportsModuleApis(),gpgp.testParams=t}var a=i(8);r.prototype={init:function(t){this.stopAd&&this.stopAd(!0),this.initAdParams(t)},initAdParams:function(t){gpgp.$.extend(this.gpDataset,t)},playerClass:{QT:i(9),HT:i(15),ZC:i(16),ZT:i(17),IVB:i(18),YL:i(19)},isAdtype:function(t){return this.playerClass.hasOwnProperty(t)},exportsModuleApis:function(){var t=this,e=["playAd","pauseAd","stopAd","preLoadAd"],i=["mute","setVolume"],r=["resize","setFullScreen","setSmallWindow","setPos"],a=[],s=e.concat(i,r,a);this.getGpParams=function(t){return gpgp.getLocalStorage(t)},this.report=function(t,e){if(gpgp.isArray(e)&&(e=e[0]),e&&"object"==typeof e){if(e.reportUrl){var i={url:document.URL};i=gpgp.$.extend(i,gpgp.getReportParams(this.gpDataset,e));var r=gpgp.appendParamsToUrl(e.reportUrl,i);gpgp.sendReport(r)}e.reportUrlOther&&e.reportUrlOther.reportitem&&(gpgp.isArray(e.reportUrlOther.reportitem)||(e.reportUrlOther.reportitem=[e.reportUrlOther.reportitem]),gpgp.$.each(e.reportUrlOther.reportitem,function(t,e){e&&e.url&&gpgp.sendReport(e.url)})),e.reportUrlSDK&&e.reportUrlSDK.reportitem&&(gpgp.isArray(e.reportUrlSDK.reportitem)||(e.reportUrlSDK.reportitem=[e.reportUrlSDK.reportitem]),gpgp.$.each(e.reportUrlSDK.reportitem,function(t,e){e&&e.url&&gpgp.sendReport(e.url)}))}},this.loadAd=function(t){if(this.playerClass[t.adtype]&&("IVB"!=t.adtype||!gpgp.api.isSmallWindow||!gpgp.api.isSmallWindow())){if(t.css=this.css,t.dom=this.dom,t.api=this.api,t.msg=this.msg,t.adplayer=this.adplayer,t.gpDataset=this.gpDataset,this.adplayer[t.adtype]&&this.adplayer[t.adtype].stopAd&&this.adplayer[t.adtype].stopAd(!0),"ZT"==t.adtype)try{this.adplayer.IVB.stopAd(!0)}catch(t){}return this.playerClass,this.playerClass[t.adtype],t.adtype,this.adplayer[t.adtype]=new this.playerClass[t.adtype](t),this.adplayer[t.adtype]}};for(var o,n=0;n<s.length;n++)o=s[n],t[o]=function(e){return function(){var i=arguments[0];if("playAd"==e&&("ZC"==i||"HT"==i))try{this.adplayer.IVB.stopAd(!0)}catch(t){}if("resize"==e&&(t.gpDataset.playerWidth=arguments[0],t.gpDataset.playerHeight=arguments[1],t.gpDataset.playerWidth,t.gpDataset.playerHeight),"setSmallWindow"==e){t.gpDataset.playerWidth=arguments[0].width,t.gpDataset.playerHeight=arguments[0].height;try{this.adplayer.IVB.stopAd(!0)}catch(t){}}if("setVolume"==e){t.gpDataset.volume=arguments[0];!1!==arguments[1]&&gpgp.setLocalStorage("volume",arguments[0]),arguments[0]}if(t.isAdtype(i)){if(t.adplayer[i]&&t.adplayer[i][e])try{t.adplayer[i][e].apply(t.adplayer[i],arguments)}catch(t){}}else for(var i in t.adplayer)if(t.adplayer[i]&&t.adplayer[i][e])try{t.adplayer[i][e].apply(t.adplayer[i],arguments)}catch(t){}}}(o)},getReqId:function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var r=t.join("");this.context.dataset.reqId=r}},t.exports=r},function(t,e){function i(t){if(t){var e=this;for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}this.isPc=gpgp.pf.os.mac||gpgp.pf.os.windows,this.isClient="client"==this.apptype,this.isUseMobileUI=gpgp.pf.mobile&&!gpgp.pf.os.ipad,this.isSupportMute=!gpgp.pf.ios&&!gpgp.pf.mobile,this.isVshou="vshou"==gpgp.api.playerType,this.isClient&&(this.adtypeMap={QT:"LD|KB|PVL",ZC:"ZC",HT:"HT",ZT:"ZT",KB:"KB",YL:"PSJ",PPB:"PPB",PVL:"PVL",IVB:"ZI"},this.pf="client",this.videoAdType="LD|KB|ZC|HT",this.pf_ex="pc",this.adaptor=2),gpgp.pf.os.phone||gpgp.pf.os.tablet?gpgp.pf.os.ipad?this.from="6":gpgp.pf.os.iphone?this.from="3":gpgp.pf.os.android&&gpgp.pf.os.tablet?this.from="4":gpgp.pf.os.android&&gpgp.pf.os.phone&&(this.from="5"):this.from="0"}i.prototype={version:"gpgp_outsite",volume:0,pf:"H5",chid:0,requestid:function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}(),adtypeMap:{QT:"WL|WK",ZC:"WC",HT:"WH",ZT:"WZ",KB:"WK",IVB:"WI",YL:"WSJ"},videoAdType:"WL|WK|WC|WH",LIVE_TYPE:0,from:"6",pf_ex:"",adaptor:1,isInSite:function(){return!0},getAdChannelId:function(){if(/ptag=wx\.search/i.test(location.href))return 64;if(""!=this.chid)return this.chid;var t="";return/(.*\.)3g\.qq\.com$/i.test(window.location.hostname)?t=13:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)||gpgp.pf.browser.qqlive?t=0:gpgp.pf.browser.wechat?t=3:gpgp.pf.browser.mqq?t=10:gpgp.pf.browser.qqnews&&(t=2),t}},t.exports=i},function(t,e,i){function r(t){this.hasShot=!1,a.apply(this,arguments)}var a=i(1),s=i(14);gpgp.extend("LdAd",r,a),r.prototype.getAdList=function(t){a.prototype.getAdList.apply(this,arguments);var e=t.adTypeList.PVL;this.relateAd={adtype:"PVL",src:""},e instanceof Array&&e[0]&&e[0].image&&(this.relateAd.src=this.getRes(e[0].image,"url"),this.adJson.adList.item.pop())},r.prototype.sendAdInfo=function(){this.broadcast("getAdInfoEvt",{adtype:this.adtype,duration:this.duration,relateAd:this.relateAd})},r.prototype.playStart=function(){this.currentAdInfo.hasPlayStart||(a.prototype.playStart.apply(this,arguments),this.viewMonitor||(this.viewMonitor=new s(this.ui.dom.gpAd)),this.viewMonitor.start(this.currentAdInfo))},r.prototype.stopAd=function(t){6!=this.playState&&(a.prototype.stopAd.apply(this,arguments),t||this.saveRFID())},r.prototype.saveRFID=function(){this.adJson&&this.adJson.adLoc&&this.adJson.adLoc.rfid&&gpgp.setLocalStorage("rfid",this.adJson.adLoc.rfid)},t.exports=r},function(t,e,i){function r(t,e,i,r){this.dataset={},this.dom={};var a={hideClass:"txp_none",muteClass:"txp_btn_ad_mute"};this.css=gpgp.$.extend({},a,e),this.tmplVar=i||{},this.init(t,r)}r.prototype={init:function(t,e){this.dataset.muteClass="txp_btn_ad_mute",this.isVideoAd=gpgp.isVideoAd(e),this.isVideoAd?(this.dom.adLayer=t.videoAdLayer,this.render("videoAdLayer")):(this.dom.adLayer=t.interactiveAdLayer,this.render(e))},getRenderEls:function(t){var e={};switch(t){case"QT":case"ZC":case"HT":case"videoAdLayer":e={topArea:"gp-video-ad-top",trueview:"txp-ui-loadingad-trueview",trueviewText:"txp-ui-loadingad-trueviewText",countDown:"txp-ui-loadingad-countDown",canSkip:"txp-ui-loadingad-canskip",enterAd:"txp-ui-loadingad-enterAd",noSkip:"txp-ui-loadingad-noskip",noSkipText:"txp-ui-loadingad-noSkipText",linkArea:"txp-ui-loadingad-linkarea",detail:"txp-ui-loadingad-detail",vipCommand:"txp-ui-loadingad-vipCommand",volume:"txp-ui-loadingad-volume",time:"txp-ui-loadingad-time",close:"txp-ui-loadingad-close",closeText:"txp-ui-loadingad-closetext",trueviewClose:"txp-ui-loadingad-trueviewClose",trueviewCloseText:"txp-ui-loadingad-trueviewClosetext",why:"txp-ui-loadingad-why",pauseAd:"txp-ui-loadingad-pasuead",pauseAdImg:"txp-ui-loadingad-pasuead-img",pauseAdClose:"txp-ui-loadingad-pausead-close",ivbAd:"txp-ui-ivbad",ivbAdImg:"txp-ui-ivbad-img",dspName:"txp-ui-loadingad-pasuead-dspName",noSkipTips:"txp-ui-loadingad-no-skip-tips",noSkipTipsClose:"txp-ui-loadingad-no-skip-tips-close",gpAd:"gp-video-ad",gpVideoAdPlayer:"gp-video-ad-player"};break;case"ZT":e={gpAdWrapper:"gp-ad-pause-wrapper",gpAd:"gp-ad-pause",pauseAdImg:"gp-ad-pause-img",pauseAdClose:"gp-ad-pause-close",dspName:"gp-ad-pause-dspname"};break;case"IVB":e={gpAdWrapper:"gp-ad-ivb-wrapper",gpAd:"gp-ad-ivb",close:"gp-ad-ivb-close",ivbAdImg:"gp-ad-ivb-img"};break;case"YL":e={gpAdWrapper:"gp-ad-yaliu-wrapper",gpAd:"gp-ad-yaliu-canvas"}}return e},render:function(t){var e=this,r=this.getRenderEls(t),a={},s="";"videoAdLayer"==t?(s=i(11),a={noSkipTipsText:"为了给腾讯视频用户提供更多优质美剧，应版权方（华纳）要求，好莱坞会员在观看华纳美剧时无法跳过广告（《吸血鬼日记》《破产姐妹》《无耻之徒》等）。我们会为会员用户继续争取免广告权益，请您谅解，谢谢！",noSkipTipsTextMobile:"为了给腾讯视频用户提供更多优质影片，应版权方要求，VIP用户在观看该版影片时无法免广告。我们会为VIP用户继续争取免广告权益，请您谅解，谢谢！"}):s=i(12),gpgp.$.extend(a,r,this.css,this.tmplVar),s=gpgp.tmpl(s,a),this.dom.adLayer.append(s);for(var o in r)e.dom[o]=e.getUiDom(r[o])},getUiDom:function(t){return this.dom.adLayer.find("[data-role="+t+"]")},show:function(t){this.dom[t]?this.dom[t].removeClass(this.css.hideClass):this.dom},hide:function(t){t&&(this.dom[t]?(this.dom[t],this.dom[t].addClass(this.css.hideClass)):this.dom)},refreshDisplay:function(t,e){e?this.show(t):this.hide(t)}},t.exports=r},function(t,e){t.exports='<%if(!hasLoadCss){ %>\r\n<style>\r\n    .txp_ad {\r\n        position: absolute;\r\n        z-index: 4;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        font-family: sans-serif;\r\n        /*pointer-events: none;*/\r\n        color: #fff;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .txp_ad_content, .txp_ad_inner {\r\n        position: absolute;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        pointer-events: none;\r\n    }\r\n    .txp_ad_link {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        pointer-events: auto;\r\n    }\r\n    .txp_ad_more {\r\n        position: absolute;\r\n        z-index: 10;\r\n        right: 8px;\r\n        bottom: 8px;\r\n        height: 28px;\r\n        padding: 0 12px;\r\n        line-height: 28px;\r\n        background-color: rgba(255,112,0,.75);\r\n        pointer-events: auto;\r\n        border-radius: 14px;\r\n        font-size: 14px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        color: #fff;\r\n        vertical-align: top;\r\n        text-decoration: none!important;\r\n    }\r\n    .txp_ad_control {\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 10px;\r\n        cursor: default;\r\n        pointer-events: auto;\r\n    }\r\n    .txp_ad_skip, .txp_ad_skip_forbidden {\r\n        position: relative;\r\n        z-index: 100;\r\n        float: left;\r\n        padding: 0 8px;\r\n        line-height: 28px;\r\n        border-radius: 14px;\r\n        font-size: 14px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        color: #fff !important;\r\n        background-color: rgba(37, 37, 37, .7);\r\n        pointer-events: auto;\r\n        font-family: "Microsoft Yahei";\r\n    }\r\n\r\n    .txp_ad_countdown {\r\n        position: relative;\r\n        display: inline-block;\r\n        padding-right: 6px;\r\n        line-height: 28px;\r\n        vertical-align: top;\r\n        color: #fd8100;\r\n        font-family: FZLTZHK--GBK1-0;\r\n        margin-right: 3px;\r\n    }\r\n    .txp_ad_countdown:after{\r\n        width: 1px;\r\n        height: 10px;\r\n        content: " ";\r\n        position: absolute;\r\n        top: 9px;\r\n        background: #ccc;\r\n        right: 0;\r\n    }\r\n\r\n    .txp_btn_close {\r\n        position: relative;\r\n        margin: 0 4px;\r\n        height: 28px;\r\n        vertical-align: top;\r\n        color: #fff;\r\n        cursor: pointer;\r\n        pointer-events: auto;\r\n        background: 0 0;\r\n        border: none;\r\n        padding: 0;\r\n    }\r\n    .txp_btn_close:hover:before,\r\n    .txp_btn_close:focus:before,\r\n    .txp_btn_close:hover:after,\r\n    .txp_btn_close:focus:after{\r\n        background: #ff6e0b;\r\n    }\r\n    .txp_btn_close:before,.txp_btn_close:after {\r\n        content: " ";\r\n        position: absolute;\r\n        width: 1px;\r\n        height: 12px;\r\n        background: white;\r\n        -webkit-transform: rotate(45deg);\r\n        transform: rotate(45deg);\r\n        top: 8px;\r\n    }\r\n    .txp_btn_close:after{\r\n        -webkit-transform: rotate(-45deg);\r\n        transform: rotate(-45deg);\r\n    }\r\n    .txp_ad_center {\r\n        position: absolute;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        bottom: 40px;\r\n        width: 400px;\r\n        height: 300px;\r\n        margin: auto;\r\n        cursor: pointer;\r\n    }\r\n    .txp_ad .txp_btn_close_ad {\r\n        position: absolute;\r\n        z-index: 2;\r\n        right: 0;\r\n        top: 0;\r\n        width: 26px;\r\n        height: 26px;\r\n        background-color: rgba(0,0,0,.7);\r\n    }\r\n    .txp_btn_ad_volume{\r\n        background: rgba(37, 37, 37, .7) url(https://ca.gtimg.com/adplugin/js/imgs/mutes.png) no-repeat;\r\n        height: 28px;\r\n        border: none;\r\n        border-radius: 14px;\r\n        width: 28px;\r\n        margin-left: 8px;\r\n        user-select: initial;\r\n        outline: none;\r\n    }\r\n    .txp_btn_ad_volume:hover{\r\n        background-position-x: -28px;\r\n    }\r\n    .txp_btn_ad_mute{\r\n        background-position-y: -28px;\r\n    }\r\n    .txp_none {\r\n        display: none;\r\n    }\r\n</style>\r\n<%}%>\r\n<gpVideoAd data-role="<%=gpAd%>" class="txp_ad <%=hideClass%>" style="background: #000">\r\n    <video data-tag="current" data-index="0" data-role="<%=gpVideoAdPlayer%>"\r\n           style="width: 100%;height: 100%;"></video>\r\n    <video data-tag="preload" data-index="1" data-role="<%=gpVideoAdPlayer%>"\r\n           style="width: 100%;height: 100%;"></video>\r\n    <gpdiv class="txp_ad_inner">\r\n        <% if(!isUseMobileUI){%>\r\n        <a data-role="<%=linkArea%>" href="javascript:;" class="txp_ad_link <%=hideClass%>"></a>\r\n        \x3c!--<a data-role="<%=vipCommand%>" href="#" class="txp_ad_btn_vip <%=hideClass%>">\r\n            <svg class="txp_icon_ad_vip" version="1.1" viewBox="0 0 81 12">\r\n                <mask maskUnits="userSpaceOnUse" x="0" y="0" width="81" height="12" id="txp_svg_ad_vip_mask">\r\n                </mask>\r\n                <linearGradient id="txp_svg_ad_vip_gradient" x1="49.77" x2="31.94" y1="12.46" y2="-2.17"\r\n                                gradientUnits="userSpaceOnUse">\r\n                    <stop offset="0" stop-color="#F9DE67"/>\r\n                    <stop offset=".16" stop-color="#c99f3f"/>\r\n                    <stop offset=".53" stop-color="#D0A741"/>\r\n                    <stop offset=".72" stop-color="#EBC968"/>\r\n                    <stop offset="1" stop-color="#FFFFBD"/>\r\n                </linearGradient>\r\n                <use xlink:href="#txp_svg_ad_vip" style="fill:url(#txp_svg_ad_vip_gradient);"/>\r\n                <use xlink:href="#txp_svg_ad_vip" style="opacity:0.19;mask:url(#txp_svg_ad_vip_mask);fill:#FFFFCB;"/>\r\n            </svg>\r\n        </a>--\x3e\r\n        <% } else {%>\r\n        <a data-role="<%=vipCommand%>" href="javascript:;" class="txp_ad_btn_vip <%=hideClass%>">观看VIP推荐</a>\r\n        <% } %>\r\n        <a data-role="<%=detail%>" href="javascript:;" class="txp_ad_more <%=hideClass%>">详情点击\r\n            <gpdiv class="txp_icon_arrow"></gpdiv>\r\n        </a>\r\n        <gpdiv style="left:10px;bottom:10px;position:absolute;opacity:0.6;font-size:12px;text-shadow:2px 2px #000"\r\n               data-role="<%=dspName%>" class="<%=hideClass%>"></gpdiv>\r\n\r\n        <gpdiv data-role="<%=topArea%>" class="txp_ad_control">\r\n            <gpdiv data-role="<%=enterAd%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown">10</gpdiv>\r\n                <gpdiv class="txp_ad_skip_text">进入广告</gpdiv>\r\n            </gpdiv>\r\n            <gpdiv data-role="<%=trueview%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <gpdiv data-role="<%=trueviewText%>" class="txp_ad_skip_text">你可以在<span\r\n                        data-role="<%=countDown%>">5</span>秒后关闭广告\r\n                </gpdiv>\r\n                <gpdiv data-role="<%=trueviewCloseText%>" class="txp_ad_skip_text <%=hideClass%>">关闭广告</gpdiv>\r\n                <button data-role="<%=trueviewClose%>" class="txp_btn txp_btn_close <%=hideClass%>"\r\n                        title="关闭广告"></button>\r\n            </gpdiv>\r\n\r\n            <gpdiv data-role="<%=canSkip%>" class="txp_ad_skip <%=hideClass%>">\r\n                <% if(!isSkipAdButtonShow||isVshou) {%>\r\n                广告剩余:\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                秒\r\n                <% } else {%>\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <% if(isUseMobileUI){%>\r\n                <button data-role="<%=closeText%>" class="txp_ad_skip_text" title="VIP免广告">VIP免广告</button>\r\n                <%}else{%>\r\n                <%if(isVshou) {%>\r\n                <gpdiv class="txp_ad_skip_text">广告</gpdiv>\r\n                <%}else{%>\r\n                <gpdiv data-role="<%=closeText%>" class="txp_ad_skip_text <%=hideClass%>">VIP免广告</gpdiv>\r\n                <button data-role="<%=close%>" class="txp_btn txp_btn_close <%=hideClass%>" title="VIP免广告"></button>\r\n                <% }} }%>\r\n            </gpdiv>\r\n\r\n            <gpdiv data-role="<%=noSkip%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <gpdiv data-role="<%=noSkipText%>" class="txp_ad_skip_text">应版权方要求，VIP无法免该片广告</gpdiv>\r\n                <button data-role="<%=why%>" class="txp_btn txp_btn_hint" title="无法跳过广告说明"></button>\r\n            </gpdiv>\r\n\r\n            <button data-role="<%=volume%>" class="txp_btn txp_btn_ad_volume <%=hideClass%>" style="z-index: 10;position: relative;">\r\n            </button>\r\n        </gpdiv>\r\n\r\n        <% if(isUseMobileUI){ %>\r\n        <gpdiv data-role="<%=noSkipTips%>" class="txp_ad_forbidden <%=hideClass%>">\r\n            <div class="txp_forbidden_text">\r\n                <%=noSkipTipsTextMobile%>\r\n            </div>\r\n            <a data-role="<%=noSkipTipsClose%>" class="txp_btn_em" href="#">我知道了</a>\r\n        </gpdiv>\r\n        <% }else{ %>\r\n        <gpdiv data-role="<%=noSkipTips%>" class="txp_ad_dialog <%=hideClass%>">\r\n            <gpdiv class="txp_dialog_bd">\r\n                <%=noSkipTipsText%>\r\n            </gpdiv>\r\n            <gpdiv data-role="<%=noSkipTipsClose%>" class="txp_ad_btn">我知道了!</gpdiv>\r\n            <a target="_blank;" class="txp_ad_fb" href="http://support.qq.com/write.shtml?fid=850">意见反馈</a>\r\n            <button data-role="<%=noSkipTipsClose%>" class="txp_btn txp_btn_close"></button>\r\n        </gpdiv>\r\n        <% } %>\r\n    </gpdiv>\r\n</gpVideoAd>\r\n'},function(t,e){t.exports='<gpdiv data-role="<%=gpAdWrapper%>" class="txp_ad">\r\n    <% if(adtype==\'ZT\'){%>\r\n    \x3c!-- 中间广告位： 400*300 --\x3e\r\n    <gpdiv data-role="<%=gpAd%>" class="txp_ad_center <%=hideClass%>" style="position: absolute;z-index: 4;">\r\n        <button data-role="<%=pauseAdClose%>" class="txp_btn txp_btn_close txp_btn_close_ad" title="关闭广告"></button>\r\n        <img data-role="<%=pauseAdImg%>" alt="">\r\n        <gpdiv style="left:8px;bottom:8px;position:absolute;opacity:0.6;font-size:12px;">\r\n            <gpdiv style="background:#000;display:inline-block;box-shadow:2px 2px #000">广告</gpdiv>\r\n            <gpdiv data-role="<%=dspName%>"\r\n                   style="display:inline-block;margin-left:10px;text-shadow:2px 2px #000"></gpdiv>\r\n        </gpdiv>\r\n\r\n    </gpdiv>\r\n\r\n    <% }else if(adtype==\'IVB\'){%>\r\n        <% if(resType==\'res\'){%>\r\n            \x3c!-- 底部广告位： 960*60 --\x3e\r\n            <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>"\r\n           style="position: absolute;z-index: 3;margin: 0;white-space: nowrap;cursor: pointer;pointer-events: auto;">\r\n        <img data-role="<%=ivbAdImg%>" alt="" style="margin: 0; max-width: initial;display: inline;">\r\n        <button data-role="<%=close%>"\r\n                style="background: url(https://ca.gtimg.com/adplugin/js/imgs/ivbClose.png);width: 40px;height: 58px;display: inline;border: none"\r\n                title="关闭广告"></button>\r\n    </gpdiv>\r\n        <% } else {%>\r\n            <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>"></gpdiv>\r\n        <% }%>\r\n    <% }else if(adtype==\'YL\'){%>\r\n    \x3c!-- 压流广告位 --\x3e\r\n    <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>" style="z-index:2;position: absolute;">\r\n        \x3c!-- 压流展示canvas --\x3e\r\n    </gpdiv>\r\n    <% }%>\r\n</gpdiv>\r\n'},function(t,e,i){function r(t){var e=a.cookie.get("luin")||a.cookie.get("uin")||"",i=t;this.getBaseParam=function(t){return{appuser:a.cookie.get("appuser")||"",requestid:t.requestid,guid:t.passThrought.guid||"",pf:t.pf,pfEx:t.pf_ex,chid:t.chid,timestamp:+new Date,mvid:t.vid||"",videoDuration:t.duration||0,coverid:t.cid||"",qq:e,pversion:t.passThrought.v,live:0,version:t.version,ua:a.getUA(navigator.userAgent)}},this.parseOrderList=function(t){var e=[],i=[],r=[],a=t.adList;if(a){var s="object"===gpgp.$.type(a)?[a]:a;gpgp.$(s).each(function(t,a){a.order_id&&a.duration&&(a.duration&&r.push(a.duration),a.image&&a.image.vid?i.push(a.image.vid):"array"===gpgp.$.type(a.image)&&a.image.length&&a.image[0].vid&&i.push(a.image[0].vid),e.push(a.order_id))})}return{oids:e,vids:i,videopt:r}},this.getBaseStepUrl=function(t){var e=this.getBaseParam(t);return"https://dp3.qq.com/stdlog/?bid=10091006&"+gpgp.param2url(e)},this.setBaseStepUrl=function(t){this.baseStepUrl=this.getBaseStepUrl(t)},t&&this.setBaseStepUrl(t),this.reportStep=function(t,e,r){if(t){e||(e={});var a={};a.adtype=i.adtypeMap[e.adtype],a.isTrueView=e.trueview||!1,a.adid=e.adid;var s=this.parseOrderList(e);if(a.oid=s.oids.join(",")||"",a.vid=s.vids.join(",")||"",e.errorcode&&(a.errorcode=e.errorcode),1===t)a.adcost=e.adcost;else if(2===t)a.adfbt=r.adfbt||0,a.adtt=r.adtt||0,videopt=r.videopt||[],videott=r.videott||[],a.videopt=videopt.join(",")||"",a.videott=videott.join(",")||"",a.errorcode=r.errorcode||"",a.adclose=r.adclose||"",a.closetime=r.closetime||"",a.firstview=r.firstview||"",a.firstadview=r.firstadview||"";else if(3===t)a.adload=r.adload,a.tpindex=r.tpindex,a.oid=r.oid,a.errorcode=r.errorcode;else{if(4!==t)return;a.adclick=r.adclick,a.clicktime=r.clicktime}var o=gpgp.appendParamsToUrl(this.baseStepUrl,a);o+="&step="+t,this.report(o)}}}var a=i(2);r.prototype={report:function(t){t&&this.sendReport(t.url||t)},sendReport:function(t,e){var i="GP_REPORT"+gpgp.randomParam(),r=this[i]=new Image;r.onload=r.onerror=function(){e&&e(),delete this[i]},r.src=t}},t.exports=r},function(t,e){function i(t){this.api={url:"https://ra.gtimg.com/web/viewability/viewability.js",reportData:null,startMonitor:null},this.target=t}i.prototype={init:function(){this.addEventListener()},initApi:function(t){var e=this;return e.api.url,gpgp.$.getScript(e.api.url,function(){crystal&&crystal.startviewability&&(e.api.startMonitor=crystal.startviewability),t&&t.bind(e)()},function(){})},getReportData:function(t){var e=[];if(!(t&&t.reportUrlView&&t.reportUrlView.reportitem&&t.reportUrlView.reportitem.length>0))return this.api.reportData=null;for(var e=[],i=0;i<t.reportUrlView.reportitem.length;i++){var r;t.reportUrlView.reportitem[i]&&t.reportUrlView.reportitem[i].url&&(r=t.reportUrlView.reportitem[i].url),e.push(r)}return this.target,this.api.reportData={objectID:this.target,reportItemUrl:e,oid:t.order_id,duration:t.duration,retry:0}},start:function(t){this.getReportData(t),this.api.reportData&&(this.api.reportData,this.api.startMonitor?this.api.startMonitor(this.api.reportData):this.initApi(function(){this.api.startMonitor(this.api.reportData)}))}},t.exports=i},function(t,e,i){function r(t){a.apply(this,arguments)}var a=i(1);gpgp.extend("HtAd",r,a),r.prototype.handleOrderByAdtype=function(t){},t.exports=r},function(t,e,i){function r(t){a.apply(this,arguments)}var a=i(1);gpgp.extend("ZcAd",r,a),r.prototype.handleOrderByAdtype=function(t){},t.exports=r},function(t,e,i){function r(t){a.apply(this,arguments)}var a=i(0);gpgp.extend("ZtAd",r,a),r.prototype.getAdList=function(t){},r.prototype.initUi=function(t,e,i){this.hasInit||(this.ui=new t(e,i,{adtype:this.adtype,dspName:""},this.adtype),this.hasInit=!0)},r.prototype.loadRes=function(t){if(!this.playList.length)return void this.reportAd(1);t=this.playList[0],this.currentAdInfo=t;var e=t.dsp_name||"";this.ui.dom.dspName.html(e);var i,r=this;"array"===gpgp.$.type(t.image)&&(t.image=t.image[0]),i=t.image.url,this.size={width:parseInt(t.image.width),height:parseInt(t.image.height)},this.resize(this.size.width,this.size.height),i&&0===i.indexOf("http")&&(this.ui.dom.pauseAdImg.attr("src",i).css({width:"100%",height:"100%"}),this.ui.dom.pauseAdImg.off("click").on("click",function(){"N"===t.no_click&&t.link&&r.openAdLink("pauseAd")}),this.ui.dom.pauseAdClose.off("click").on("click",function(){r.stopAd()}),this.ui.dom.pauseAdImg[0].onload=function(){6!=r.playState&&(r.broadcast("loadReadyEvt",{adtype:r.adtype,index:r.currentAdInfo.oIdx}),r.ui.show("adLayer"),r.ui.show("gpAd"),r.reportAd(1))})},r.prototype.resize=function(t,e){var i=this.size.width,r=this.size.height;if(i>t||r>e){var a=gpgp.getScale(i,r,t,e);i*=a,r*=a}this.ui.dom.gpAd.css({width:i,height:r,top:0,left:0,right:0,bottom:0,margin:"auto"})},t.exports=r},function(t,e,i){function r(t){this.supportRichMedia=["richMediaJs","res"],a.apply(this,arguments)}var a=i(0);gpgp.extend("IvbAd",r,a),r.prototype.getAdList=function(t){if(this.broadcast("msg","getAdList"),this.currentAdInfo=this.playList[0],this.currentAdInfo){var e=this.currentAdInfo.richdata;e&&e.plugins&&(e.plugins.richMediaJs?this.resType="richMediaJs":this.resType="res")}},r.prototype.initUi=function(t,e,i){this.broadcast("msg","initUi"),this.hasInit||(this.ui=new t(e,i,{adtype:this.adtype,dspName:this.currentAdInfo.dsp_name||"",resType:this.resType},this.adtype),this.hasInit=!0)},r.prototype.loadRes=function(t){if(this.broadcast("msg","loadRes"),this.reportAd(1),this.currentAdInfo&&this.currentAdInfo.richdata&&this.currentAdInfo.richdata.plugins){if(this.currentAdInfo.richdata.plugins,"richMediaJs"==this.resType){this.params.wrapper=this.ui.dom.gpAd[0];var e=i(3);return this.player=new e(this.params),this.loadReady=function(){gpgp.api.upBarrageZindex&&gpgp.api.upBarrageZindex(),this.ui.show("adLayer"),this.ui.show("gpAd"),this.player.play()},this.playComplete=function(){this.stopAd()},void this.player.loadAd({index:1,preload:!1,adItem:this.currentAdInfo,api:this},this)}var r=this.currentAdInfo.richdata,a=parseInt(1e3*r.plugins.easeInTime)||5e3,s=parseInt(1e3*r.plugins.easeOutTime)||5e3,o=parseInt(1e3*r.plugins.stayTime);if(o=isNaN(o)?5e3:o,this.richdata=r,"N"==r.plugins.needAdMark)return void this.startEndReport();var n;this.size={width:1004,height:60},this.css={bottom:50,scale:1};var d=this;d.gpDataset.playerWidth,d.gpDataset.playerHeight,n=r.plugins.res[0].content,d.ui.dom.ivbAdImg.attr("src",n),this.ui.dom.ivbAdImg.off("click").on("click",function(){d.openAdLink()}),this.setPos({left:"initial"}),d.stepTime={1:a,2:s},d.stepStart={},d.ui.dom.gpAd.on("mouseover",function(){clearTimeout(d.stepTimer),d.ui.dom.gpAd.css({right:d.ui.dom.gpAd.css("right")}),d.stepTime[d.step]-=new Date-d.stepStart[d.step]}).on("mouseout",function(){p(d.step,d.stepTime[d.step],!0)});var p=function(t,e,i){switch(d.step=t,d.stepTimer=null,t){case 0:d.moveIvb(0,i),d.stopAd();break;case 1:d.stepStart[d.step]=+new Date,d.ui.dom.gpAd.css({transitionProperty:"right",transitionDuration:e+"ms"}),d.moveIvb(1,i),d.stepTimer=setTimeout(function(){p(2,s)},e+o);break;case 2:d.stepStart[d.step]=+new Date,d.ui.dom.gpAd.css({transitionDuration:e+"ms"}),d.moveIvb(2,i),d.stepTimer=setTimeout(function(){p(0)},e)}};d.ui.dom.ivbAdImg.on("load",function(){d.ui.show("adLayer"),d.ui.show("gpAd"),d.resize(d.gpDataset.playerWidth,d.gpDataset.playerHeight);var t;gpgp.api.getControlStatus&&(t=gpgp.api.getControlStatus()),function(t){t?d.ui.dom.gpAd.css("bottom",d.css.bottom+d.bottomFix):d.ui.dom.gpAd.css("bottom",5+d.bottomFix)}(t),d.ui.dom.gpAd.css({right:-d.gpDataset.playerWidth}),p(1,a)}),d.ui.dom.close.on("click",function(){clearTimeout(d.stepTimer),gpgp.recordWisdomPoint("1000000",d.richdata.oid,d.richdata.loc),d.stopAd()})}},r.prototype.playError=function(){this.stopAd(!0)},r.prototype.startEndReport=function(t){var e=this.richdata,i=function(t,i){e.plugins[t]&&(i=i||0,setTimeout(function(){gpgp.sendReport(e.plugins[t])},i))};"start"!=t&&t||i("startReportUrl"),"end"==t&&i("endReportUrl"),t||i("endReportUrl",easeInTime+easeOutTime+stayTime)},r.prototype.moveIvb=function(t,e){this.moveStep=t;var i=this;switch(t){case 0:e||i.startEndReport("end");break;case 1:var r=i.getAdWidth(),a=(i.gpDataset.playerWidth-r)/2;i.ui.dom.gpAd.css({right:a}),e||i.startEndReport("start");break;case 2:var r=i.getAdWidth(),a=i.gpDataset.playerWidth-(this.size.width-r*this.scale)/2;this.ui.dom.gpAd.css({right:a})}},r.prototype.getAdWidth=function(){return this.ui.dom.gpAd.width()},r.prototype.stopAd=function(){if("richMediaJs"==this.resType)try{gpgp.api.resetBarrageZindex()}catch(t){}a.prototype.stopAd.apply(this,arguments)},r.prototype.setPos=function(t){if("richMediaJs"!=this.resType){if(this.ui&&(this.ui.dom.gpAd.css(t),t.bottom)){var e=parseInt(this.ui.dom.gpAd.css("bottom"))+this.bottomFix;this.ui.dom.gpAd.css("bottom",e)}}else try{this.player.setPos(t)}catch(t){}},r.prototype.resize=function(t,e){if("richMediaJs"!=this.resType)this.ui&&(this.scale=gpgp.getScale(this.size.width,this.size.height,t/2,e),this.scale,this.bottomFix=this.size.height*(this.scale-1)/2,this.ui.dom.gpAd.css({transform:"scale("+this.scale+")"}),this.step>0&&this.moveIvb(this.step,!0));else try{this.player.resize(t,e)}catch(t){}},r.prototype.setSmallWindow=function(t){this.resize(t.width,t.height),arguments.toString()},t.exports=r},function(t,e,r){function a(t){s.apply(this,arguments)}var s=r(0);gpgp.extend("YaliuAd",a,s),a.prototype.getAdList=function(t){t.scene_info=this.adJson.scene_info,t.adLoc=this.adJson.adLoc,this.playList=this.assemble(t).playList;var e=this.playList;this.dataset.isShowingCidArr=[],this.dataset.hasReportCids={},this.dataset.yaliuCidArr=[],this.dataset.yaliuRenderTimers={},this.dataset.yaliuFodderStart={},this.dataset.isFilmPausing=!1,this.dataset.hasResizedCidArr=[];for(var i=this,r=e.length-1;r>=0;r--){for(var a=e[r],s=a.material.length-1;s>=0;s--){var o=a.material[s].url;".mp4"===o.substring(o.length-4).toLowerCase()?a.mp4_index=s:".json"===o.substring(o.length-5).toLowerCase()&&(a.png_index=s)}a.vid=i.gpDataset.vid,this.dataset.hasReportCids[a.cid]=!1,this.dataset.yaliuCidArr.push(a.cid)}},a.prototype.sendAdInfo=function(){for(var t=this.playList,e=[],i=this,r=0;r<t.length;r++){var a={};a.isSceneAd=!t[r].anchor.interval||""==t[r].anchor.interval,a.cid=t[r].cid,a.oid=t[r].order_id,a.duration=t[r].duration,a.begin=t[r].anchor.begin,a.end=a.isSceneAd?(parseInt(a.begin)+parseInt(a.duration)).toString():(parseInt(1e3*i.gpDataset.duration)-parseInt(t[r].anchor.end)).toString(),a.interval=t[r].anchor.interval,e.push(a)}this.broadcast("getAdInfoEvt",{adtype:this.adtype,playList:e})},a.prototype.initUi=function(t,e,i){if(!this.hasInit){this.ui=new t(e,i,{adtype:this.adtype},this.adtype),this.hasInit=!0;var r={};r.clientWidth=this.gpDataset.playerWidth,r.clientHeight=this.gpDataset.playerHeight,r.clientTop=0,r.clientLeft=0,this.dataset.player=r,this.dataset.lastPlayerClientWidth=r.clientWidth,this.dataset.lastPlayerClientHeight=r.clientHeight}},a.prototype.loadRes=function(t){!t||t.length},a.prototype.assemble=function(t){for(var e={playList:[],adLoc:this.adJson.adLoc},i=0;i<t.adList.length;i++){var r=t.adList[i].anchor_binding;if(r)for(var a=0;a<r.length;a++){var s=t.adList[i].order_id,o=r[a].cid,n=r[a].anchor_rule_id,d=r[a].anchor_id,p=this.assembleEachOrder(s,o,n,d,t.adList[i],t.scene_info.anchor_rule);e.playList.push(p)}}return e},a.prototype.assembleEachOrder=function(t,e,i,r,a,s){var o=JSON.parse(JSON.stringify(a));delete o.creative,delete o.anchor_binding;for(var n=0;n<a.creative.length;n++){var d=a.creative[n];if(d.id==e)for(var p in d)"id"==p?o.cid=d[p]:o[p]=d[p]}for(var n=0;n<a.anchor_binding.length;n++){var h=a.anchor_binding[n];h.cid==e&&h.anchor_rule_id==i&&h.anchor_id==r&&(o.link=h.link,o.report_url=h.report_url,o.anchor_rule_id=i)}for(var n=0;n<s.length;n++)if(s[n].id==i)for(var l=s[n].anchor,c=0;c<l.length;c++)l[c].id==r&&(o.anchor=l[c],o.anchor_rule_type=s[n].type);return o},a.prototype.preLoadAd=function(t,e){var i=this.getOrderData(e);i&&("pc"==this.gpDataset.pf_ex?(this.requestMP4(i.material[i.mp4_index].url,i.cid),this.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"mp4"})):(this.requestPNG(i.material[i.png_index].url,i.cid),this.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"png"})),this.dataset.yaliuFodderStart[i.cid]=(new Date).getTime())},a.prototype.loadReady=function(t){this.broadcast("loadReadyEvt",{adtype:this.adtype,cid:t})},a.prototype.playAd=function(t,e,i){if(!(this.dataset.isShowingCidArr.indexOf(i)>-1)||this.dataset.isFilmPausing){-1==this.dataset.isShowingCidArr.indexOf(i)&&this.dataset.isShowingCidArr.push(i),this.dataset.isFilmPausing=!1;var r=this.getOrderData(i);this.ui.show("gpAd"),this.ui.show("adLayer"),"pc"==this.gpDataset.pf_ex&&this.renderYaliuAdByMP4(r,r.mp4_index,e)}},a.prototype.reportAd=function(t){this.reportAdByData(t)},a.prototype.getOrderData=function(t){for(var e=this.playList,i=null,r=0;r<e.length;r++)e[r].cid==t&&(i=e[r]);return i},a.prototype.requestMP4=function(t,e){var i=this;0==t.indexOf("http://")&&(t="https://"+t.split("http://")[1]);var i=this,r=this.getOrderData(e),a=r.mp4_index,s=r.material[a].width/2,o=r.material[a].height;r.anchor.pos_w=s/1920,r.anchor.pos_h=o/1080;var n=document.createElement("video");r.videoElement=n,n.style.width=s+"px",n.style.height=o+"px";var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="arraybuffer",d.timeout="6000",d.send(),d.onload=function(){if(200===d.status){var t=new Uint8Array(d.response),r=window.URL.createObjectURL(new Blob([t],{type:"video/mp4"}));n.src=r,i.loadReady(e),i.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:e,type:"mp4",cost:(new Date).getTime()-i.dataset.yaliuFodderStart[e]})}},d.onerror=function(){i.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"mp4",cost:(new Date).getTime()-i.dataset.yaliuFodderStart[e]})}},a.prototype.requestPNG=function(t,e){0==t.indexOf("http://")&&(t="https://"+t.split("http://")[1]);var r=this;gpgp.$.jsonp({url:t,dataType:"jsonp",callbackParameter:"callback",callback:"adplayerYaliuJsonpCallback",timeout:2e4,cache:!0}).done(function(t){var a=r.getOrderData(e),s=a.png_index;a.material[s].data=t,a.offscreenCanvasArr=[];var o=t.width,n=t.height;a.anchor.pos_w=o/1920,a.anchor.pos_h=n/1080;for(var d=0;d<t.frames.length-1;d++){var p=t.frames[d],h="data:image/png;base64,"+t.data[p];r.getOffscreenCanvas(h,d,o,n,i,e)}r.loadReady(e),r.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:e,type:"png",cost:(new Date).getTime()-r.dataset.yaliuFodderStart[e]})}).fail(function(t,i){r.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"png",cost:(new Date).getTime()-r.dataset.yaliuFodderStart[e]})})},a.prototype.getOffscreenCanvas=function(t,e,i,r,a,s){var o=this,n=document.createElement("img");n.src=t,n.onload=function(){var t=document.createElement("canvas"),s=t.getContext("2d");t.width=i,t.height=r,s.drawImage(n,0,0,i,r),o.playList[a].offscreenCanvasArr[e]=t}},a.prototype.renderYaliuAdByMP4=function(t,e,i){var r=i-t.anchor.begin/1e3;if(!(r<0)){var a=this,s=this.ui.dom.gpAd,o="yaliuad-"+t.cid,n="yaliu-sample-canvas-"+t.cid,d="yaliu-ad-canvas-"+t.cid,p='<gpdiv data-role="'+o+'"><canvas data-role="'+n+'" style="display:none;"></canvas><canvas data-role="'+d+'" style="position:absolute;"></canvas></gpdiv>',h=s.find("[data-role="+o+"]");h[0]||s.append(p);var l=t.videoElement,c=s.find("[data-role="+n+"]"),u=s.find("[data-role="+d+"]"),g=c[0].getContext("2d"),f=u[0].getContext("2d");l.setAttribute("crossOrigin","*");var y=this.dataset.player,m=t.material[e].width,v=t.material[e].height,A=y.clientWidth*t.anchor.pos_w,x=y.clientHeight*t.anchor.pos_h,w=y.clientWidth*t.anchor.pos_x+y.clientLeft,_=y.clientHeight*t.anchor.pos_y+y.clientTop;y.clientWidth,y.clientHeight;if(c.attr("width",m),c.attr("height",v),u.attr("width",m/2),u.attr("height",v),u.css({left:w,top:_,width:A,height:x,display:"block"}),h.css({display:"block"}),s.css({display:"block"}),"N"==t.no_click&&(u.css({cursor:"pointer"}),u.off("click").on("click",function(){window.open(t.link),a.broadcast("openAdLink",t)})),t.anchor.interval&&""!=t.anchor.interval?l.currentTime=.1:l.currentTime=r,this.dataset.hasReportCids[t.cid]&&t.anchor.interval&&""!=t.anchor.interval||(a.reportAd(t),this.dataset.hasReportCids[t.cid]=!0),this.dataset.yaliuRenderTimers[t.cid])l.play();else{l.play();var b=setInterval(function(){if(L(t.cid),l.ended)return t.anchor.interval&&""!=t.anchor.interval?(a.stopAdOneByOne(t.cid,!1),setTimeout(function(){if(a.dataset.isShowingCidArr&&a.dataset.isShowingCidArr.indexOf(t.cid)>-1){var e=a.dataset.isShowingCidArr.indexOf(t.cid);e>-1&&a.dataset.isShowingCidArr.splice(e,1)}},t.anchor.interval)):a.stopAdOneByOne(t.cid,!0),clearInterval(b),void(b=null);a.dataset.isFilmPausing?l.pause():l.play(),I()},1e3/24);this.dataset.yaliuRenderTimers[t.cid]=b}var I=function(){g.drawImage(l,0,0,m,v);for(var t=g.getImageData(m/2,0,m/2,v),e=g.getImageData(0,0,m/2,v),i=e.data.length/4,r=0;r<i;r++)e.data[4*r+3]=t.data[4*r+1];f.putImageData(e,0,0)},L=function(e){var i=a.dataset.player;(a.dataset.lastPlayerClientWidth!=i.clientWidth||a.dataset.lastPlayerClientHeight!=i.clientHeight||a.dataset.lastPlayerClientWidth==i.clientWidth&&a.dataset.lastPlayerClientHeight==i.clientHeight&&-1==a.dataset.hasResizedCidArr.indexOf(e))&&(A=i.clientWidth*t.anchor.pos_w,x=i.clientHeight*t.anchor.pos_h,w=i.clientWidth*t.anchor.pos_x+i.clientLeft,_=i.clientHeight*t.anchor.pos_y+i.clientTop,u.css({position:"absolute",display:"block",left:w,top:_,width:A,height:x}),a.dataset.lastPlayerClientWidth=i.clientWidth,a.dataset.lastPlayerClientHeight=i.clientHeight,a.dataset.hasResizedCidArr.push(e)),u.css({display:"block"})}}},a.prototype.renderYaliuAdByPNG=function(t,e,i){var r=this,a=i-t.anchor.begin/1e3;if(!(a<0)){var s="yaliuad-"+t.cid,o=this.ui.dom.gpAd;if("N"==t.no_click)var n='<canvas data-role="'+s+'" style="display:none;pointer-events:auto;cursor:pointer;"></canvas>';else var n='<canvas data-role="'+s+'" style="display:none;"></canvas>';var d=o.find("[data-role="+s+"]");d[0]||(o.append(n),d=o.find("[data-role="+s+"]"));var p=d[0].getContext("2d"),h=t.material[e].data.frames;if(t.anchor.interval&&""!=t.anchor.interval)var l=0;else var l=parseInt(a)*t.material[e].data.fps;var c={};c.clientWidth=this.gpDataset.playerWidth,c.clientHeight=this.gpDataset.playerHeight,c.clientTop=0,c.clientLeft=0;var u=t.material[e].data.width,g=t.material[e].data.height,f=c.clientWidth*t.anchor.pos_w,y=c.clientHeight*t.anchor.pos_h,m=c.clientWidth*t.anchor.pos_x+c.clientLeft,v=c.clientHeight*t.anchor.pos_y+c.clientTop;p.clearRect(0,0,f,y),d.attr("width",f),d.attr("height",y),d.css({position:"absolute",display:"block",left:m,top:v}),o.css({display:"block"}),"N"==t.no_click&&d.off("click").on("click",function(){window.open(t.link),this.broadcast("openAdLink",t)}),this.dataset.hasReportCids[t.cid]&&t.anchor.interval&&""!=t.anchor.interval||(r.reportAd(t),this.dataset.hasReportCids[t.cid]=!0);var A=(document.createElement("img"),t.offscreenCanvasArr),x=(c.clientWidth,c.clientHeight,setInterval(function(){_(),w(r.dataset.isFilmPausing?!1:!0),(l==h.length-1||l>h.length-1)&&(t.anchor.interval&&(r.dataset.yaliuCycleTimers[t.cid]=setTimeout(function(){var e=this.dataset.isShowingCidArr.indexOf(t.cid);e>-1&&this.dataset.isShowingCidArr.splice(e,1)},t.anchor.interval)),d.css({display:"none"}),clearInterval(x),x=null)},1e3/t.material[e].data.fps));this.dataset.yaliuRenderTimers[t.cid]=x;var w=function(t){p.clearRect(0,0,f,y),p.drawImage(A[l],0,0,u,g,0,0,f,y),t&&l++},_=function(){var e=r.dataset.player;r.dataset.lastPlayerClientWidth==e.clientWidth&&r.dataset.lastPlayerClientHeight==e.clientHeight||(f=e.clientWidth*t.anchor.pos_w,y=e.clientHeight*t.anchor.pos_h,m=e.clientWidth*t.anchor.pos_x,v=e.clientHeight*t.anchor.pos_y,d.css({position:"absolute",display:"block",left:m,top:v,width:f,height:y}),r.dataset.lastPlayerClientWidth=e.clientWidth,r.dataset.lastPlayerClientHeight=e.clientHeight),d.css({display:"block"})}}},a.prototype.resize=function(t,e,i,r){this.dataset.hasResizedCidArr=[],this.dataset.player&&(this.dataset.player.clientWidth=t,this.dataset.player.clientHeight=e,this.dataset.player.clientLeft=i,this.dataset.player.clientTop=r)},a.prototype.pauseAd=function(t){this.dataset.isFilmPausing=!0},a.prototype.stopAd=function(t,e,i){if(this.ui)if(i)this.stopAdOneByOne(i);else{for(var r=0;r<this.dataset.yaliuCidArr.length;r++)this.stopAdOneByOne(this.dataset.yaliuCidArr[r]);this.ui.hide("gpAd")}},a.prototype.stopAdOneByOne=function(t,e){if(this.ui){e=void 0===e;var i=this.ui.dom.gpAd;if(this.dataset.yaliuRenderTimers&&this.dataset.yaliuRenderTimers[t]&&(clearInterval(this.dataset.yaliuRenderTimers[t]),this.dataset.yaliuRenderTimers[t]=null),this.dataset.yaliuCycleTimers&&this.dataset.yaliuCycleTimers[t]&&(clearTimeout(this.dataset.yaliuCycleTimers[t]),this.dataset.yaliuCycleTimers[t]=null),e&&this.dataset.isShowingCidArr&&this.dataset.isShowingCidArr.indexOf(t)>-1){var r=this.dataset.isShowingCidArr.indexOf(t);r>-1&&this.dataset.isShowingCidArr.splice(r,1)}var a=i.find("[data-role=yaliuad-"+t+"]");a[0]&&a.css({display:"none"}),this.broadcast("stopAdEvt",{adtype:this.adtype})}},t.exports=a}]);